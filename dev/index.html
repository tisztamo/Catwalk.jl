<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Catwalk.jl Intro · Catwalk.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Catwalk.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Catwalk.jl Intro</a><ul class="internal"><li><a class="tocitem" href="#When-to-use-this-package-1"><span>When to use this package</span></a></li><li><a class="tocitem" href="#Alternatives-1"><span>Alternatives</span></a></li></ul></li><li><a class="tocitem" href="usage/">Usage</a></li><li><a class="tocitem" href="howitworks/">How it works?</a></li><li><a class="tocitem" href="tuning/">Configuration &amp; tuning</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Catwalk.jl Intro</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Catwalk.jl Intro</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tisztamo/Catwalk.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Catwalk.jl-Intro-1"><a class="docs-heading-anchor" href="#Catwalk.jl-Intro-1">Catwalk.jl Intro</a><a class="docs-heading-anchor-permalink" href="#Catwalk.jl-Intro-1" title="Permalink"></a></h1><p>Catwalk.jl can speed up long-running Julia processes by minimizing the overhead of dynamic dispatch. It is a JIT compiler that continuosly re-optimizes dispatch code based on data collected at runtime.</p><p><img src="assets/catwalk-speeddemo.gif" alt="Speedup demo"/> <a href="https://github.com/tisztamo/Catwalk.jl/blob/main/test/scheduling.jl">source code of this test</a></p><p>It profiles user-specified call sites, estimating the distribution of dynamically dispatched types during runtime, and generates fast static routes for the most frequent ones on the fly.</p><p>The statistical profiler has very low overhead and can be configured to handle situations where the distribution of dispatched types changes relatively fast.</p><p>To minimize compilation overhead, recompilation only occurs when the distribution changed enough and the tunable cost model predicts significant speedup compared to the best version that was previously compiled.</p><h2 id="When-to-use-this-package-1"><a class="docs-heading-anchor" href="#When-to-use-this-package-1">When to use this package</a><a class="docs-heading-anchor-permalink" href="#When-to-use-this-package-1" title="Permalink"></a></h2><p>The dynamic dispatch in Julia is very fast in itself, so speeding it up is not an easy task. Catwalk.jl focuses on use cases when it is not feasible to list the dynamically dispatched concrete types in the source code of the call site.</p><p>Catwalk.jl assumes the followings:</p><ul><li>The process is long running: several seconds, but possibly minutes are needed to break even after the initial compilation overhead.</li><li>Few dynamically dispatched call sites contribute significantly to the running time (dynamic dispatch in a hot loop).</li><li>You can modify the source code around the interesting call sites (add a macro call), and calculation is organized into batches.</li></ul><h2 id="Alternatives-1"><a class="docs-heading-anchor" href="#Alternatives-1">Alternatives</a><a class="docs-heading-anchor-permalink" href="#Alternatives-1" title="Permalink"></a></h2><ul><li><a href="https://github.com/melonedo/SingleDispatchArrays.jl">SingleDispatchArrays.jl</a> gives you fast single dispatch for arrays of non-homogeneous elements.</li><li>JuliaFolds packages in general try to do a weaker version of this, as discussed in: <a href="https://discourse.julialang.org/t/tail-call-optimization-and-function-barrier-based-accumulation-in-loops/25831">Tail-call optimization and function-barrier -based accumulation in loops</a>.</li><li><a href="https://github.com/jlapeyre/ManualDispatch.jl">ManualDispatch.jl</a> can serve you better in less dynamic cases, when it is feasible to list the dynamically dispatched types in the source code.</li><li>In even simpler cases using unions instead of a type hierarchy may allow the Julia compiler to &quot;split the union&quot;. See for example <a href="https://github.com/JuliaCollections/DataStructures.jl/pull/682/commits/4742228d42ae441f9837e5825feedeb1c013bd99">List performance improvent by Union-typed tail</a> in DataStructures.jl.</li><li><a href="https://github.com/yuyichao/FunctionWrappers.jl">FunctionWrappers.jl</a> will give you type stability for a fixed (?) cost. Its use case is different, but if you are wrestling with type instabilities, take a look at it first.</li><li><a href="https://github.com/tisztamo/FunctionWranglers.jl">FunctionWranglers.jl</a> allows fast, inlined execution of functions provided in an array - for that use case it is a better choice than Catwalk.jl.</li></ul></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="usage/">Usage »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 15 July 2021 07:45">Thursday 15 July 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
